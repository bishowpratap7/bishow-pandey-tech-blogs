{"id":90,"date":"2023-06-15T12:06:13","date_gmt":"2023-06-15T12:06:13","guid":{"rendered":"https:\/\/javapan.com\/?p=90"},"modified":"2024-02-10T16:39:23","modified_gmt":"2024-02-10T16:39:23","slug":"simple-jenkinsfile-for-jenkins-pipeline","status":"publish","type":"post","link":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/","title":{"rendered":"Simple JenkinsFile for Jenkins Pipeline."},"content":{"rendered":"\n<p><strong>Jenkins<\/strong> is a popular open-source automation server used for continuous integration and continuous deployment, enabling efficient software development through automated build, test, and deployment processes.<\/p>\n\n\n\n<p>This simple JenkinsFile will help you deploy your maven project easily in different environments based on master, develop, feature, hotfix or release branch or tags. You can copy this and customize based on your need.<\/p>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">pipeline {\nagent { label 'jenkins-agent-maven-311' }<\/code><\/pre>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">options {\n    buildDiscarder(logRotator(numToKeepStr:'10'))\n    disableConcurrentBuilds()\n}\n\nenvironment {\n    def APP_NAME = 'Your Project Name'\n    def EMAIL_NOTIFICATION_LIST = 'Your or team email'\n    def VERSION = readMavenPom().getVersion()\n    def RELEASE_VERSION = null\n    def BUILD_TYPE = null\n}\n\nstages {\n    stage('Build') {\n        steps {\n            echo \"starting build\"\n            echo \"pom VERSION = ${VERSION}\" \/\/You can add branch, time it started and other too\n\n            script {\n                def isTag = sh(returnStdout: true, script: \"git tag --contains | head -1\").trim()\n\n                if (\"${env.BRANCH_NAME}\" == 'master' &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${VERSION}\"\n                    BUILD_TYPE = 'snapshot'\n                } else if (\"${env.BRANCH_NAME}\" == 'develop' &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${env.BRANCH_NAME}\"\n                    BUILD_TYPE = 'snapshot'\n                } else if (\"${env.BRANCH_NAME}\".startsWith('feature') &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${env.BRANCH_NAME}\"\n                    BUILD_TYPE = 'feature'\n                } else if (\"${env.BRANCH_NAME}\".startsWith('hotfix') &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${env.BRANCH_NAME}\"\n                    BUILD_TYPE = 'hotfix'\n                } else if (isTag &amp;&amp; \"${env.BRANCH_NAME}\".startsWith('release-') &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${env.BRANCH_NAME}\".replace(\"release-\", \"\") + \".RELEASE\"\n                    BUILD_TYPE = 'release'\n                } else if (\"${env.BRANCH_NAME}\".startsWith('release') &amp;&amp; \"${VERSION}\".endsWith('-SNAPSHOT')) {\n                    RELEASE_VERSION = \"${VERSION}\".replace(\"-SNAPSHOT\", \"-RC${currentBuild.number}\")\n                    BUILD_TYPE = 'releasecandidate'\n                } else {\n                    error(\"Your Custom Error for user to see \")\n                }\n\n                sh 'mvn --version'\n                echo \"release version = ${RELEASE_VERSION}\"\n                sh \"mvn versions:set -DnewVersion=${RELEASE_VERSION}\"\n                sh \"mvn clean install\" \/\/ Can also use sh \"mvn clean install -DskipTests\" and other similar commands \n            }\n        }\n    }\n    stage(\"Reports\") {\n        steps {\n            junit allowEmptyResults: true, testResults: 'Your test results metrics location to save test coverage etc results'\n            jacoco()\n        }\n    }\n    stage(\"Archive\") {\n        steps {\n            archiveArtifacts artifacts: '**\/target\/*.war,**\/target\/*.jar,**\/target\/*.zip', fingerprint: true, onlyIfSuccessful: true\n        }\n    }\n}\npost {\n    always {\n        deleteDir() \/\/ DO SOME CLEANUP\n    }\n    success {\n        script {\n            sendEmail(\"BUILD STATUS : SUCCESS\", \"${EMAIL_NOTIFICATION_LIST}\", \"${APP_NAME}\")\n        }\n    }\n    failure {\n        script {\n            sendEmail(\"BUILD HAS FAILED\", \"${EMAIL_NOTIFICATION_LIST}\", \"${APP_NAME}\")\n        }\n    }\n    unstable {\n        script {\n            sendEmail(\"BUILD IS NOW UNSTABLE\", \"${EMAIL_NOTIFICATION_LIST}\", \"${APP_NAME}\")\n        }\n    }\n}<\/code><\/pre>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">}\ndef sendEmail(String buildStatus, String recipients, String app) {\nbuildStatus = buildStatus ?: 'SUCCESSFULLY BUILT'<\/code><\/pre>\n\n\n\n<p><\/p>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">def scmChanges = getScmChanges()\necho \"${scmChanges}\"\ndef subject = \"${buildStatus}: ${app} Build: [${env.BUILD_NUMBER}]\"\ndef details = \"\"\"&lt;p&gt;${buildStatus}: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]':&lt;\/p&gt;&lt;p&gt;${scmChanges}&lt;\/p&gt;\"\"\"\n\nemailext (\n    to: recipients,\n    subject: subject,\n    body: details,\n    mimeType: 'text\/html'\n)<\/code><\/pre>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">}\n@NonCPS\ndef getScmChanges() {\nif (currentBuild.changeSets.isEmpty()) {\nreturn 'Looking for new changes if any\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026'\n}<\/code><\/pre>\n\n\n\n<pre class=\"wp-block-code has-base-color has-contrast-background-color has-text-color has-background\"><code lang=\"java\" class=\"language-java\">def changeLogSets = currentBuild.changeSets\n\ndef changeString = \"\"\n\nfor (int a = 0; a &lt; changeLogSets.size(); a++) {\n    def entries = changeLogSets[a].items\n    for (int b = 0; b &lt; entries.length; b++) {\n        def entry = entries[b]\n        changeString += \"[\" + new Date(entry.timestamp) + \"][${entry.author}][${entry.commitId}] ${entry.msg}\\n\"\n    }\n}\nreturn \"Changes: found as below \\n\" + changeString<\/code><\/pre>\n\n\n\n<p>}<br>Note : Not all Pipelines will have these same three stages.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Jenkins is a popular open-source automation server used for continuous integration and continuous deployment, enabling efficient software development through automated build, test, and deployment processes. This simple JenkinsFile will help you deploy your maven project easily in different environments based on master, develop, feature, hotfix or release branch or tags. You can copy this and [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":91,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_coblocks_attr":"","_coblocks_dimensions":"","_coblocks_responsive_height":"","_coblocks_accordion_ie_support":"","footnotes":""},"categories":[],"tags":[70],"class_list":["post-90","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","tag-simple-jenkinsfile-for-jenkins-pipeline"],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v23.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.\" \/>\n<meta property=\"og:description\" content=\"Jenkins is a popular open-source automation server used for continuous integration and continuous deployment, enabling efficient software development through automated build, test, and deployment processes. This simple JenkinsFile will help you deploy your maven project easily in different environments based on master, develop, feature, hotfix or release branch or tags. You can copy this and [&hellip;]\" \/>\n<meta property=\"og:url\" content=\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/\" \/>\n<meta property=\"og:site_name\" content=\"JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.\" \/>\n<meta property=\"article:published_time\" content=\"2023-06-15T12:06:13+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2024-02-10T16:39:23+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png\" \/>\n\t<meta property=\"og:image:width\" content=\"362\" \/>\n\t<meta property=\"og:image:height\" content=\"212\" \/>\n\t<meta property=\"og:image:type\" content=\"image\/png\" \/>\n<meta name=\"author\" content=\"Bishow Pandey\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Bishow Pandey\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"1 minute\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/\",\"url\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/\",\"name\":\"Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.\",\"isPartOf\":{\"@id\":\"https:\/\/javapan.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage\"},\"image\":{\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage\"},\"thumbnailUrl\":\"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png\",\"datePublished\":\"2023-06-15T12:06:13+00:00\",\"dateModified\":\"2024-02-10T16:39:23+00:00\",\"author\":{\"@id\":\"https:\/\/javapan.com\/#\/schema\/person\/a77752ba68fc33df883be2ffb8e8285a\"},\"breadcrumb\":{\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/\"]}]},{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage\",\"url\":\"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png\",\"contentUrl\":\"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png\",\"width\":362,\"height\":212},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https:\/\/javapan.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Simple JenkinsFile for Jenkins Pipeline.\"}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/javapan.com\/#website\",\"url\":\"https:\/\/javapan.com\/\",\"name\":\"JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.\",\"description\":\"Solving Technology Challenges\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/javapan.com\/?s={search_term_string}\"},\"query-input\":{\"@type\":\"PropertyValueSpecification\",\"valueRequired\":true,\"valueName\":\"search_term_string\"}}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/javapan.com\/#\/schema\/person\/a77752ba68fc33df883be2ffb8e8285a\",\"name\":\"Bishow Pandey\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/javapan.com\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/2ee0db8821f0777e76adf2f4d0c20bb1?s=96&d=wavatar&r=g\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/2ee0db8821f0777e76adf2f4d0c20bb1?s=96&d=wavatar&r=g\",\"caption\":\"Bishow Pandey\"},\"sameAs\":[\"https:\/\/javapan.com\"],\"url\":\"https:\/\/javapan.com\/author\/bishowpratap7\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/","og_locale":"en_US","og_type":"article","og_title":"Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.","og_description":"Jenkins is a popular open-source automation server used for continuous integration and continuous deployment, enabling efficient software development through automated build, test, and deployment processes. This simple JenkinsFile will help you deploy your maven project easily in different environments based on master, develop, feature, hotfix or release branch or tags. You can copy this and [&hellip;]","og_url":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/","og_site_name":"JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.","article_published_time":"2023-06-15T12:06:13+00:00","article_modified_time":"2024-02-10T16:39:23+00:00","og_image":[{"width":362,"height":212,"url":"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png","type":"image\/png"}],"author":"Bishow Pandey","twitter_card":"summary_large_image","twitter_misc":{"Written by":"Bishow Pandey","Est. reading time":"1 minute"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/","url":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/","name":"Simple JenkinsFile for Jenkins Pipeline. - JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.","isPartOf":{"@id":"https:\/\/javapan.com\/#website"},"primaryImageOfPage":{"@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage"},"image":{"@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage"},"thumbnailUrl":"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png","datePublished":"2023-06-15T12:06:13+00:00","dateModified":"2024-02-10T16:39:23+00:00","author":{"@id":"https:\/\/javapan.com\/#\/schema\/person\/a77752ba68fc33df883be2ffb8e8285a"},"breadcrumb":{"@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/"]}]},{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#primaryimage","url":"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png","contentUrl":"https:\/\/javapan.com\/wp-content\/uploads\/2023\/06\/Screenshot-2023-06-15-08070d2.png","width":362,"height":212},{"@type":"BreadcrumbList","@id":"https:\/\/javapan.com\/simple-jenkinsfile-for-jenkins-pipeline\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/javapan.com\/"},{"@type":"ListItem","position":2,"name":"Simple JenkinsFile for Jenkins Pipeline."}]},{"@type":"WebSite","@id":"https:\/\/javapan.com\/#website","url":"https:\/\/javapan.com\/","name":"JAVAPAN - Unlock Your Brilliance, Share Your Knowledge! \ud83d\ude80 Post Your Articles For Free.","description":"Solving Technology Challenges","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/javapan.com\/?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/javapan.com\/#\/schema\/person\/a77752ba68fc33df883be2ffb8e8285a","name":"Bishow Pandey","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/javapan.com\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/2ee0db8821f0777e76adf2f4d0c20bb1?s=96&d=wavatar&r=g","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/2ee0db8821f0777e76adf2f4d0c20bb1?s=96&d=wavatar&r=g","caption":"Bishow Pandey"},"sameAs":["https:\/\/javapan.com"],"url":"https:\/\/javapan.com\/author\/bishowpratap7\/"}]}},"_links":{"self":[{"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/posts\/90"}],"collection":[{"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/comments?post=90"}],"version-history":[{"count":7,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/posts\/90\/revisions"}],"predecessor-version":[{"id":493,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/posts\/90\/revisions\/493"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/media\/91"}],"wp:attachment":[{"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/media?parent=90"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/categories?post=90"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/javapan.com\/wp-json\/wp\/v2\/tags?post=90"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}